---
layout: post
title: 路由器折腾记
category: Auxiliary
tags: [路由器, PandoraBox, 计算机网络]
latest: 2014年06月19日 14:52:41
---

路由器的功能越来越丰富，可玩性越来越高，对于网络方面特别感兴趣的人，我想都会折腾路由器。

偶遇迅雷做活动，心动然后行动，买了一台如意云1 ( ***MT7620*** ) ，主要是用于中继学校的 ChinaNet 信号以及迅雷远程脱机下载。

现在对折腾过程做个简单的总结。

UBOOT 刷机
-

#### 1. 下载路由器处理器( 比如联想如意云-1 的 MT7620n )支持的固件：[PandoraBox for Lenovo RY-1](http://downloads.openwrt.org.cn/PandoraBox/Lenovo-Y1_RY-1S/firmware/stable/)

> 云 2 的某些固件也支持云 1。

#### 2. 禁用掉除连接路由器 LAN 口的网卡外的其他网卡，并将电脑与路由器 LAN 口连接。

+ ① 拔掉路由器 WAN 口网线，电脑网线连接路由器 LAN 口。

+ ② 路由器断电后，用笔或者牙签插进 **reset** 洞，捅住 **reset** 键不放，然后给路由器上电后倒数 20 秒钟松开，然后把笔拔出。

+ ③ 电脑 IP 设置为局域网的某个 IP，如：192.168.1.2。

> 不能设置为网关地址。

+ ④ 打开浏览器输入 192.168.1.1 后上传固件进行升级。

> 建议使用 IE 浏览器，升级过程一定请勿断电。

+ ⑤ 完成后，将电脑 IP 更改为自动获取，重新启用刚才禁用的网卡。

#### 其他

有些路由器集成了 RST/WPS 按钮( 如 **newifi**  )，突出设计以后只需要手指按住就行了。

> 断电后摁住 RST/WPS 按钮；上电后按住 5 秒以上再松开。


设置 PPPoE 拨号上网
-

> 为方便说明，路由器界面建议先切换为 Bootstrap 风格：系统 -> 语言和界面。

### 添加/修改新接口

找到 **网络 -> 接口 -> 添加新接口 -> 创建新接口**，填写接口名( 随意 )，选择接口采用的协议为 PPPoE，然后选择 **保持&应用**。

在接口列表中修改刚刚创建的接口，找到 **一般设置 -> 基本设置**，填写  **PAP/CHAP用户名和密码**( 即 ISP 提供的宽带账号密码 )，然后选择 **保持&应用**。

> 这里也可以不添加新接口而直接修改默认的接口。


在路由器 **备份/升级** 界面更新固件
-

没什么好说的，找到 **系统 -> 备份/升级 -> 刷写新的固件**，然后上传兼容的路由器固件更新即可。


PandoraBox 中继 ChinaNet 
-

找到 **网络 -> 无线 -> 搜索**，在搜索结果中选择你要中继的无限信号，这里即 ChinaNet。

找到信号衰减最小的信号，选择 **加入网络**

在出现的设置界面，取消勾选 **重置无线配置**，新的网络名称默认即可，然后提交。

在出现的 **接口配置-> 基本配置** 中设置 ChinaNet 的模式为 **Client**，然后 **保存&应用**。\

> 这里的 Client 和 Master 是相对于路由器的概念，路由器是发射无线信号的设备，因此它称为 Master，每个路由器之外的其他路由器发射的信号都是 Client。

找到 **网络 -> 接口**，找到刚刚新添加的无线接口名，点击 **修改**。

将 **DHCP** 协议切换为 **PPPoE**，然后填写账户密码，然后 **保存&应用**。

如果不出意外，其他网卡此时便可以通过路由器中继的，已拨号成功的 ChinaNet 网络信号接入 Internet 了。

> 贵州 ChinaNet 拨号格式：`账号@cw.gz.chntel.com`；密码需要动态获取：[ChinaNet-0](http://61.139.61.216:8080/hwssp/index.do) or [ChinaNet-1](http://61.180.1.4/portal4JX/hw)。

> [贵州电信账户充值](http://pay.gz163.cn/web/index.php)

> 有时候上级路由器可能会更改信道导致中继失败，这时重复上述操作即可。

迅雷远程脱机下载
-

该步骤需要在路由器系统中下载安装一个插件：[Aria2](http://aria2.sourceforge.net/)。

> 迅雷离线公开的 API 支持 Aria2。

> 为了节省时间，也可以选择自带了 Aria2 的 PandoraBox 固件。

### PandoraBox安装 Aria2

上面的步骤完成后，便可以通过 Web 或者迅雷客户端远程查看下载情况了，确实方便。

##### 关于路由器的其他玩法：未完待续... ...
