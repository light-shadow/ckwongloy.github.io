---
layout: post
title: XML 10 分钟入门
category: Web
tags: [XML, DOM, DTD]
latest: 2015年10月16日 10:07:19
---

1969 年， gml，通用标记语言，主要的目的是要在不同的机器进行通信的数据规范。

1985 年，sgml，标准通用标记语言，对 gml 的一个完善。

1993 年，html，www 万维网的骨架。

1998 年，XML，可扩展标记语言，不同的编程语言都可以使用 XML。

HTML 本身有什么不足？
-

由于 html 本身有缺陷，所以出现了很多其他的语言比如 xml，主要体现在：

- HTML 标记不能自定义

- HTML 标记本身缺少含义

- HTML 本身没有真正的国际化

这也是为什么在不同的浏览器上看到的网页是不一样的原因。

*蒂姆·博纳斯李* 曾经想要废除 HTML，但由于全世界范围内已经有大量的 HTML 网页，所以废除十分困难。

期间李曾想直接推出 XML，但是还是先推出了一个过渡语言：XHTML。

为什么需要 XML？
-

### XML 主要用于解决什么问题？

- 描述具有复杂关系的数据，如家族谱。

- XML 可以充当小型的数据库。

### XML 的应用场景

- 程序间通信数据的传输格式，网络通讯数据格式的业内标准

- 配置文件的描述

### XML 的优点

- 通用度很高

- 描述能力很强

- 可扩展性强

- 可维护性强

#### 数据的存储位置

要么是在数据库 要么在文件 而硬盘盒内存只是硬件媒质

数据的底层也是文件，但是读取文件比数据库的读取要快，此外数据库还需要额外的软件安装

协同软件：管理软件的软件，解决信息孤岛问题。

XML 语法
-

- 文件头

浏览器会根据不同文件的文件头去决定采用什么解析器去解析文件。

XML 文件头是必须要有的，写法如下：

```
<?xml version="1.0" encoding ="utf-8"?>
```

##### **注意**

文件头的编码要和文件的实际编码格式一致，否则会报错。

#### ANSI

ANSI 不是一成不变的，通常根据地区的不同而不同。

举例说明：如果操作系统是简体中文版，那么 ANSI 会自动对应 GB2312。

- 标签的命名不能以数字开头，也不能含空格，否则会报错。

### XML 文件组成

- 文档声明

<?xml version="1.0" encoding ="utf-8" standalone="yes"?>

放在 XML 文档的第一行。

`Standalone` 代表文档是否独立使用，默认为 no。浏览器对此属性不关心，就算不对也不会报错。

- 元素

XML 元素指 XML 文档中出现的标签。一个标签分为起始标签和结束标签。标签有 2 种写法：

1、 包含标签体：`<xml>xml</xml>`。

2、 不包含标签体：`<xml/> `( 建议没有内容的标签使用这种格式 )。

标签可以嵌套，但是不能交叉嵌套：<a><b></a></b>。

每个 XML 文档必须有且仅有一个根元素。即命名不能重复。

根元素的其实标记放在其他所有元素之前。

XML 标签中出现的空格和换行都会被当作标签内容进行处理，所以不建议这么写。

标签的大小写区分，命名规范同编程语言。

- 属性

属性值用 "" 和 '' 分隔。" 和 ' 可以互相区分。

- 实体

如果属性值中要同时使用双引号和单引号，最好使用实体。

```
&quot;  "

&apos; '

&amp; &
```

同一个标签中不允许出现重复 ID。

- 注释

同 HTML：`<!-- 注释 -->`

注释不能放在标记中，也不能嵌套。

- CDATA 节

避免被解析引擎解析，而是当作原始内容处理。写法如下：

```
<![CDATA[XXXX]]>
```

XXXX 可以是任意字符，]]  > 除外；也不能嵌套。

*面试题：如何用 XML 传递小图片？*

答：可以把文件读成一个 byte[] 数组，然后放到 CDATA 节，再传递。

- 处理指令 ( PI )

不是 XML 重点，了解即可。

比如 CSS 修饰 XML：

```
<?xml-stylesheet type="text/css" href="/xml.css"?>
```

##### **说明**

XML 也可以有外观，比如配合 CSS。但是这不是它的重点，XML 的重点在于数据。

DTD
-

Document Type Definition。一般和 XML 配合使用，主要的用处是约束 XML 文件。

XML 引入了 DTD 文件，这样 XML 既可以自定义也要受到 DTD  的约束。

### 为什么需要 DTD 约束 XML？

为了避免不合理的标签出现，比如在人的标签中添加会吃铁的标签就不合理。

有了约束，才能规范。

### 常用的 XML 约束技术

- XML DTD

- XML Schema

### **DTD 的使用**

- XML 中引入 DTD

- 本地

```
<!DOCTYPE 根元素 SYSTEM "DTD 的本地 URL">
```

- 公共

```
<!DOCTYPE 根元素 PUBLIC " DTD 名称" "DTD 的网络 URL">
```

##### **注意**

DTD 和 XML 的编码要一致。

### **DTD 语法细节**

```
<!ELEMENT 元素名 元素类型>
```

元素类型可以是：EMPTY、ANY、#PCDATA。

EMPTY 代表元素不能有子元素和文本，但是可以有属性，且元素要为空元素。

ANY 代表该元素可以包含在 DTD 中定义的任何元素内容。

PCDATA 可以包含任何字符数据，但是不能在其中包含任何子元素或其他类型组合。

- 组合类型

`+`：一到多。

### DTD 的分类

- 外部 DTD

- 内部 DTD

- 内外混合 DTD

建议使用外部 DTD

### DTD 和 SCHEMA 的区别

DTD 不能对标签内容的合理性进行限制，而 Schema 可以。

比如：年龄中不能含有字母。
